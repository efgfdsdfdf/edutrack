<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Companion - Premium Novel Collection</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <style>
:root {
    --primary: #00d4ff;
    --primary-dark: #00a8cc;
    --secondary: #8a2be2;
    --accent: #00ff88;
    --warning: #ffaa00;
    --danger: #ff4757;
    --light: #121212;
    --dark: #f8f9fa;
    --gray: #adb5bd;
    --light-gray: #2d2d2d;
    --card-bg: #1e1e1e;
    --sidebar-bg: #0a0a0a;
    --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.7);
    --radius: 8px;
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --cyber-glow: 0 0 20px var(--primary);
    --neon-border: 1px solid rgba(0, 212, 255, 0.3);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
    color: var(--dark);
    font-family: 'Inter', sans-serif;
    line-height: 1.6;
    min-height: 100vh;
    background-attachment: fixed;
}

.container {
    max-width: 1600px;
    margin: 0 auto;
    padding: 20px;
}

/* Header */
.header {
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(15px);
    border-radius: var(--radius);
    padding: 20px 30px;
    margin-bottom: 30px;
    box-shadow: var(--shadow);
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: var(--neon-border);
    position: relative;
    overflow: hidden;
}

.header::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.1), transparent);
    animation: cyber-scan 3s linear infinite;
}

@keyframes cyber-scan {
    0% { left: -100%; }
    100% { left: 100%; }
}

.logo-container {
    display: flex;
    align-items: center;
    gap: 15px;
    position: relative;
    z-index: 2;
}

.logo-icon {
    font-size: 32px;
    color: var(--primary);
    text-shadow: var(--cyber-glow);
    animation: pulse 2s infinite alternate;
}

@keyframes pulse {
    0% { text-shadow: 0 0 10px var(--primary); }
    100% { text-shadow: 0 0 20px var(--primary), 0 0 30px var(--primary); }
}

.logo-text {
    font-size: 28px;
    font-weight: 700;
    background: linear-gradient(135deg, var(--primary), var(--accent));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    font-family: 'Monospace', 'Courier New', monospace;
    letter-spacing: 1px;
    text-shadow: var(--cyber-glow);
}

.user-area {
    display: flex;
    align-items: center;
    gap: 15px;
    position: relative;
    z-index: 2;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 16px;
    background: rgba(0, 0, 0, 0.6);
    border-radius: 25px;
    border: var(--neon-border);
    backdrop-filter: blur(10px);
}

.user-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: black;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-family: monospace;
    border: 1px solid var(--primary);
    box-shadow: var(--cyber-glow);
}

.home-btn, .logout-btn {
    background: transparent;
    border: 2px solid var(--primary);
    color: var(--primary);
    padding: 8px 20px;
    border-radius: 25px;
    cursor: pointer;
    font-weight: 600;
    transition: var(--transition);
    font-family: monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.home-btn:hover, .logout-btn:hover {
    background: var(--primary);
    color: black;
    box-shadow: var(--cyber-glow);
    transform: translateY(-2px);
}

/* Main Layout */
.main-layout {
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: 30px;
}

/* Sidebar */
.sidebar {
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(15px);
    border-radius: var(--radius);
    padding: 25px;
    box-shadow: var(--shadow);
    height: fit-content;
    position: sticky;
    top: 30px;
    border: var(--neon-border);
}

.sidebar-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-family: monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.sidebar-title i {
    color: var(--primary);
}

.search-box {
    position: relative;
    margin-bottom: 25px;
}

.search-input {
    width: 100%;
    padding: 12px 45px 12px 20px;
    border: 2px solid rgba(0, 212, 255, 0.3);
    border-radius: 25px;
    font-size: 14px;
    transition: var(--transition);
    background: rgba(0, 0, 0, 0.5);
    color: var(--dark);
    font-family: monospace;
}

.search-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: var(--cyber-glow);
    background: rgba(0, 0, 0, 0.7);
}

.search-input::placeholder {
    color: rgba(255, 255, 255, 0.5);
}

.search-icon {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--primary);
}

/* Filter Tags */
.filter-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 25px;
}

.filter-tag {
    padding: 6px 14px;
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(0, 212, 255, 0.3);
    border-radius: 20px;
    font-size: 13px;
    cursor: pointer;
    transition: var(--transition);
    color: var(--gray);
    font-family: monospace;
}

.filter-tag.active,
.filter-tag:hover {
    background: var(--primary);
    color: black;
    border-color: var(--primary);
    box-shadow: var(--cyber-glow);
}

/* Stats */
.stats-cards {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-top: 25px;
}

.stat-card {
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(138, 43, 226, 0.1));
    color: var(--dark);
    padding: 20px;
    border-radius: var(--radius);
    text-align: center;
    border: var(--neon-border);
    position: relative;
    overflow: hidden;
}

.stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--primary), transparent);
}

.stat-number {
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 5px;
    color: var(--primary);
    font-family: monospace;
}

.stat-label {
    font-size: 13px;
    opacity: 0.9;
    font-family: monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Main Content */
.main-content {
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(15px);
    border-radius: var(--radius);
    padding: 30px;
    box-shadow: var(--shadow);
    border: var(--neon-border);
}

.content-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
}

.section-title {
    font-size: 24px;
    font-weight: 700;
    color: var(--dark);
    font-family: monospace;
    text-transform: uppercase;
    letter-spacing: 2px;
    background: linear-gradient(135deg, var(--primary), var(--accent));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.view-toggle {
    display: flex;
    gap: 10px;
    background: rgba(0, 0, 0, 0.5);
    padding: 5px;
    border-radius: 25px;
    border: var(--neon-border);
}

.view-btn {
    padding: 8px 20px;
    border: none;
    background: transparent;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 500;
    color: var(--gray);
    transition: var(--transition);
    font-family: monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.view-btn.active {
    background: var(--primary);
    color: black;
    box-shadow: var(--cyber-glow);
}

/* Novels Grid */
.novels-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 25px;
    margin-bottom: 40px;
}

.novel-card {
    background: rgba(0, 0, 0, 0.5);
    border-radius: var(--radius);
    overflow: hidden;
    box-shadow: var(--shadow);
    transition: var(--transition);
    border: var(--neon-border);
    position: relative;
}

.novel-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--cyber-glow);
    border-color: var(--primary);
}

.novel-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, transparent, rgba(0, 212, 255, 0.1), transparent);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.novel-card:hover::before {
    opacity: 1;
}

.novel-cover {
    width: 100%;
    height: 200px;
    object-fit: cover;
    filter: grayscale(30%);
    transition: var(--transition);
}

.novel-card:hover .novel-cover {
    filter: grayscale(0%);
    transform: scale(1.05);
}

.novel-badge {
    position: absolute;
    top: 15px;
    right: 15px;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    font-family: monospace;
    letter-spacing: 1px;
    border: 1px solid;
    background: rgba(0, 0, 0, 0.8);
}

.badge-new {
    color: var(--warning);
    border-color: var(--warning);
    box-shadow: 0 0 10px rgba(255, 170, 0, 0.3);
}

.badge-bestseller {
    color: var(--primary);
    border-color: var(--primary);
    box-shadow: var(--cyber-glow);
}

.badge-popular {
    color: var(--accent);
    border-color: var(--accent);
    box-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
}

.novel-content {
    padding: 20px;
    position: relative;
    z-index: 1;
}

.novel-title {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 8px;
    color: var(--dark);
    font-family: monospace;
    line-height: 1.4;
}

.novel-author {
    color: var(--primary);
    font-size: 14px;
    margin-bottom: 12px;
    font-style: italic;
    font-family: monospace;
}

.novel-description {
    color: var(--gray);
    font-size: 13px;
    line-height: 1.6;
    margin-bottom: 20px;
    height: 4.2em;
    overflow: hidden;
}

.novel-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid rgba(0, 212, 255, 0.2);
}

.novel-price {
    font-size: 20px;
    font-weight: 700;
    color: var(--primary);
    font-family: monospace;
    text-shadow: var(--cyber-glow);
}

.novel-meta {
    font-size: 13px;
    color: var(--gray);
    display: flex;
    align-items: center;
    gap: 5px;
    font-family: monospace;
}

.novel-actions {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}

.btn {
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-family: monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative;
    overflow: hidden;
}

.btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease;
}

.btn:hover::before {
    left: 100%;
}

.btn-primary {
    background: var(--primary);
    color: black;
    border: 1px solid var(--primary);
}

.btn-primary:hover {
    background: var(--primary-dark);
    border-color: var(--primary-dark);
    box-shadow: var(--cyber-glow);
    transform: translateY(-2px);
}

.btn-success {
    background: var(--accent);
    color: black;
    border: 1px solid var(--accent);
}

.btn-success:hover {
    background: #00cc77;
    border-color: #00cc77;
    box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
    transform: translateY(-2px);
}

.btn-outline {
    background: transparent;
    border: 1px solid var(--primary);
    color: var(--primary);
}

.btn-outline:hover {
    background: var(--primary);
    color: black;
    box-shadow: var(--cyber-glow);
}

/* Library Section */
.library-section {
    margin-top: 40px;
    padding-top: 30px;
    border-top: 2px solid rgba(0, 212, 255, 0.2);
}

.library-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
}

.library-title {
    font-size: 22px;
    font-weight: 700;
    color: var(--dark);
    font-family: monospace;
    text-transform: uppercase;
    letter-spacing: 2px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.empty-library {
    text-align: center;
    padding: 60px 30px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: var(--radius);
    border: 2px dashed rgba(0, 212, 255, 0.3);
    backdrop-filter: blur(10px);
}

.empty-icon {
    font-size: 48px;
    color: rgba(0, 212, 255, 0.2);
    margin-bottom: 20px;
}

/* Modals */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    z-index: 1000;
    backdrop-filter: blur(10px);
}

.modal-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(10, 10, 10, 0.95);
    padding: 40px;
    border-radius: var(--radius);
    max-width: 500px;
    width: 90%;
    box-shadow: var(--shadow-lg);
    border: var(--neon-border);
    position: relative;
    overflow: hidden;
}

.modal-content::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--primary), transparent);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
}

.modal-title {
    font-size: 24px;
    font-weight: 700;
    color: var(--dark);
    font-family: monospace;
    text-transform: uppercase;
    letter-spacing: 2px;
    background: linear-gradient(135deg, var(--primary), var(--accent));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.close-modal {
    background: none;
    border: none;
    font-size: 24px;
    color: var(--primary);
    cursor: pointer;
    transition: var(--transition);
    font-family: monospace;
}

.close-modal:hover {
    color: var(--accent);
    transform: rotate(90deg);
}

.modal-body {
    margin-bottom: 25px;
}

.payment-summary {
    background: rgba(0, 0, 0, 0.5);
    padding: 20px;
    border-radius: var(--radius);
    margin-bottom: 25px;
    border: var(--neon-border);
}

.summary-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    font-family: monospace;
}

.summary-item span:first-child {
    color: var(--gray);
}

.summary-item span:last-child {
    color: var(--dark);
}

.summary-total {
    display: flex;
    justify-content: space-between;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid rgba(0, 212, 255, 0.2);
    font-weight: 700;
    font-size: 18px;
    font-family: monospace;
    color: var(--primary);
}

.form-group {
    margin-bottom: 20px;
}

.form-label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: var(--dark);
    font-family: monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.form-input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid rgba(0, 212, 255, 0.3);
    border-radius: 6px;
    font-size: 16px;
    transition: var(--transition);
    background: rgba(0, 0, 0, 0.5);
    color: var(--dark);
    font-family: monospace;
}

.form-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: var(--cyber-glow);
    background: rgba(0, 0, 0, 0.7);
}

.form-input::placeholder {
    color: rgba(255, 255, 255, 0.3);
}

.modal-footer {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
}

/* Paystack Brand */
.paystack-brand {
    text-align: center;
    padding: 15px;
    background: rgba(0, 168, 89, 0.1);
    border-radius: var(--radius);
    border: 2px solid #00a859;
    margin-bottom: 25px;
    color: #00ff88;
    font-weight: 600;
    font-family: monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
    backdrop-filter: blur(10px);
}

.paystack-brand i {
    margin-right: 8px;
}

/* Success Modal */
.success-modal .modal-content {
    text-align: center;
}

.success-icon {
    font-size: 60px;
    color: var(--accent);
    margin-bottom: 20px;
    animation: success-pulse 2s infinite;
}

@keyframes success-pulse {
    0%, 100% { 
        transform: scale(1); 
        text-shadow: 0 0 10px var(--accent);
    }
    50% { 
        transform: scale(1.1); 
        text-shadow: 0 0 20px var(--accent);
    }
}

.success-message {
    font-size: 16px;
    margin-bottom: 25px;
    color: var(--dark);
    font-family: monospace;
}

/* Loading */
.loading {
    display: none;
    text-align: center;
    padding: 60px;
}

.spinner {
    border: 4px solid rgba(0, 212, 255, 0.3);
    border-top: 4px solid var(--primary);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin: 0 auto 20px;
    box-shadow: var(--cyber-glow);
}

/* Techy Grid Background */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        linear-gradient(rgba(0, 212, 255, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 212, 255, 0.05) 1px, transparent 1px);
    background-size: 50px 50px;
    z-index: -1;
    opacity: 0.3;
}

/* Terminal-like Scrollbar */
::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.5);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, var(--primary), var(--secondary));
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, var(--primary-dark), var(--secondary));
}

/* Selection */
::selection {
    background-color: var(--primary);
    color: black;
}

/* Focus Styles */
:focus {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
}

/* Code-like Typography */
.code-text {
    font-family: 'Monospace', 'Courier New', monospace;
    background: rgba(0, 0, 0, 0.5);
    padding: 2px 6px;
    border-radius: 3px;
    border-left: 2px solid var(--primary);
}

/* Cyberpunk Glitch Effect */
@keyframes glitch {
    0% { transform: translate(0); }
    20% { transform: translate(-2px, 2px); }
    40% { transform: translate(-2px, -2px); }
    60% { transform: translate(2px, 2px); }
    80% { transform: translate(2px, -2px); }
    100% { transform: translate(0); }
}

.glitch {
    animation: glitch 0.5s infinite;
}

/* Data Stream Effect */
.data-stream {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
    opacity: 0.1;
}

.data-stream::before {
    content: '';
    position: absolute;
    top: -100%;
    left: 0;
    width: 2px;
    height: 100%;
    background: linear-gradient(transparent, var(--primary), transparent);
    animation: data-fall 20s linear infinite;
}

@keyframes data-fall {
    0% { top: -100%; opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { top: 100%; opacity: 0; }
}

.data-stream::after {
    content: '';
    position: absolute;
    top: -100%;
    left: 10%;
    width: 1px;
    height: 100%;
    background: linear-gradient(transparent, var(--accent), transparent);
    animation: data-fall 25s linear infinite;
    animation-delay: 5s;
}

/* ====== RESPONSIVE MEDIA QUERIES ====== */
@media (max-width: 1200px) {
    .container {
        padding: 15px;
    }
    
    .main-layout {
        grid-template-columns: 250px 1fr;
        gap: 20px;
    }
    
    .novels-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
    }
}

@media (max-width: 1024px) {
    .main-layout {
        grid-template-columns: 1fr;
    }
    
    .sidebar {
        position: static;
        margin-bottom: 20px;
    }
    
    .content-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
    
    .view-toggle {
        align-self: flex-start;
    }
}

@media (max-width: 768px) {
    .header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
        padding: 15px 20px;
    }
    
    .logo-container {
        flex-direction: column;
        gap: 10px;
    }
    
    .logo-text {
        font-size: 24px;
    }
    
    .user-area {
        width: 100%;
        justify-content: space-between;
        flex-wrap: wrap;
    }
    
    .user-info {
        order: 1;
        margin-right: auto;
    }
    
    .home-btn, .logout-btn {
        order: 2;
        padding: 6px 15px;
        font-size: 14px;
    }
    
    .novels-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 15px;
    }
    
    .novel-cover {
        height: 180px;
    }
    
    .novel-content {
        padding: 15px;
    }
    
    .novel-title {
        font-size: 16px;
    }
    
    .novel-price {
        font-size: 18px;
    }
    
    .novel-actions {
        flex-direction: column;
    }
    
    .btn {
        width: 100%;
        justify-content: center;
    }
    
    .main-content {
        padding: 20px;
    }
    
    .modal-content {
        padding: 25px;
        width: 95%;
    }
    
    .modal-footer {
        flex-direction: column;
    }
    
    .modal-footer .btn {
        width: 100%;
    }
    
    .stats-cards {
        flex-direction: row;
        flex-wrap: wrap;
    }
    
    .stat-card {
        flex: 1;
        min-width: 140px;
    }
}

@media (max-width: 576px) {
    .novels-grid {
        grid-template-columns: 1fr;
    }
    
    .header {
        padding: 12px 15px;
    }
    
    .logo-text {
        font-size: 20px;
    }
    
    .user-info {
        padding: 6px 12px;
    }
    
    .user-avatar {
        width: 30px;
        height: 30px;
    }
    
    .home-btn, .logout-btn {
        padding: 5px 12px;
        font-size: 12px;
    }
    
    .section-title, .library-title, .modal-title {
        font-size: 18px;
        letter-spacing: 1px;
    }
    
    .content-header {
        gap: 10px;
    }
    
    .view-toggle {
        width: 100%;
        justify-content: center;
    }
    
    .view-btn {
        flex: 1;
        text-align: center;
        padding: 6px 10px;
        font-size: 12px;
    }
    
    .sidebar {
        padding: 15px;
    }
    
    .filter-tags {
        gap: 6px;
    }
    
    .filter-tag {
        padding: 5px 10px;
        font-size: 11px;
    }
    
    .stat-number {
        font-size: 22px;
    }
    
    .stat-label {
        font-size: 11px;
    }
    
    .modal-content {
        padding: 20px 15px;
    }
    
    .payment-summary {
        padding: 15px;
    }
    
    .summary-item {
        font-size: 14px;
    }
    
    .summary-total {
        font-size: 16px;
    }
}

@media (max-width: 400px) {
    .container {
        padding: 10px;
    }
    
    .header {
        padding: 10px;
        border-radius: 6px;
    }
    
    .user-area {
        flex-direction: column;
        gap: 10px;
    }
    
    .user-info {
        order: 1;
        width: 100%;
        justify-content: center;
    }
    
    .home-btn, .logout-btn {
        order: 2;
        width: 100%;
        justify-content: center;
    }
    
    .main-content, .sidebar {
        padding: 15px;
        border-radius: 6px;
    }
    
    .novel-cover {
        height: 160px;
    }
    
    .novel-content {
        padding: 12px;
    }
    
    .novel-description {
        font-size: 12px;
        height: 3.8em;
    }
    
    .btn {
        padding: 8px 15px;
        font-size: 12px;
    }
    
    .stats-cards {
        flex-direction: column;
    }
    
    .stat-card {
        width: 100%;
    }
}

/* Extra small devices */
@media (max-width: 320px) {
    .logo-text {
        font-size: 18px;
    }
    
    .logo-icon {
        font-size: 24px;
    }
    
    .section-title {
        font-size: 16px;
    }
    
    .novel-title {
        font-size: 15px;
    }
    
    .novel-price {
        font-size: 16px;
    }
    
    .novel-meta {
        font-size: 11px;
    }
    
    .modal-title {
        font-size: 16px;
    }
}
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo-container">
            <i class="fas fa-book-open logo-icon"></i>
            <h1 class="logo-text">Student Companion</h1>
        </div>
        <div class="user-area">
            <div class="user-info" id="userInfo">
                <div class="user-avatar" id="userAvatar">U</div>
                <span id="userName">User</span>
            </div>
            <button class="home-btn" id="homeBtn">
                <i class="fas fa-home"></i> Home
            </button>
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <div class="main-layout">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search novels...">
                    <i class="fas fa-search search-icon"></i>
                </div>

                <h3 class="sidebar-title">
                    <i class="fas fa-filter"></i>
                    Filter by Genre
                </h3>
                <div class="filter-tags" id="genreFilters">
                    <!-- Genre filters will be added dynamically -->
                </div>

                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-number" id="totalNovels">0</div>
                        <div class="stat-label">Total Novels</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="myLibraryCount">0</div>
                        <div class="stat-label">My Library</div>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <div class="content-header">
                    <h2 class="section-title">Premium Novel Collection</h2>
                    <div class="view-toggle">
                        <button class="view-btn active" id="viewAllBtn">All Novels</button>
                        <button class="view-btn" id="viewLibraryBtn">My Library</button>
                    </div>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Loading novels...</p>
                </div>

                <!-- All Novels Grid -->
                <div class="novels-grid" id="novelsGrid">
                    <!-- Novels will be dynamically inserted here -->
                </div>

                <!-- My Library Section -->
                <div class="library-section" id="librarySection" style="display: none;">
                    <div class="library-header">
                        <h2 class="library-title">
                            <i class="fas fa-bookmark"></i>
                            My Library
                        </h2>
                    </div>
                    <div class="novels-grid" id="libraryGrid">
                        <!-- Purchased novels will be dynamically inserted here -->
                    </div>
                    <div class="empty-library" id="emptyLibrary">
                        <div class="empty-icon">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <h3>Your library is empty</h3>
                        <p>Purchase novels to start building your collection!</p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Purchase Modal -->
    <div class="modal" id="purchaseModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Confirm Purchase</h3>
                <button class="close-modal" id="closePurchaseModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>You're about to purchase:</p>
                <div class="payment-summary">
                    <div class="summary-item">
                        <span>Novel:</span>
                        <strong id="purchaseNovelTitle">[Title]</strong>
                    </div>
                    <div class="summary-item">
                        <span>Author:</span>
                        <span id="purchaseNovelAuthor">[Author]</span>
                    </div>
                    <div class="summary-item">
                        <span>Price:</span>
                        <span>₦<span id="purchaseNovelPrice">0</span></span>
                    </div>
                    <div class="summary-total">
                        <span>Total:</span>
                        <span>₦<span id="purchaseTotalPrice">0</span></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline" id="cancelPurchaseBtn">Cancel</button>
                    <button class="btn btn-primary" id="confirmPurchaseBtn">Proceed to Payment</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Paystack Payment Modal -->
    <div class="modal" id="paystackModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Complete Payment</h3>
                <button class="close-modal" id="closePaystackModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="paystack-brand">
                    <i class="fas fa-shield-alt"></i> Secured by Paystack
                </div>
                
                <p>Complete your purchase of:</p>
                <div class="payment-summary">
                    <div class="summary-item">
                        <span>Novel:</span>
                        <strong id="paystackNovelTitle">[Title]</strong>
                    </div>
                    <div class="summary-item">
                        <span>Amount:</span>
                        <span>₦<span id="paystackNovelPrice">0</span></span>
                    </div>
                </div>
                
                <form id="paymentForm">
                    <div class="form-group">
                        <label class="form-label" for="customerEmail">Email Address</label>
                        <input type="email" id="customerEmail" class="form-input" placeholder="your@email.com" required>
                        <small style="color: var(--gray); margin-top: 5px; display: block;">
                            A payment receipt will be sent to this email
                        </small>
                    </div>
                    
                    <div class="loading" id="paymentProcessing" style="display: none;">
                        <div class="spinner"></div>
                        <p>Processing payment...</p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelPaystackBtn">Cancel</button>
                <button class="btn btn-primary" id="payWithPaystackBtn">
                    <i class="fas fa-lock"></i> Pay with Paystack
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal success-modal" id="successModal">
        <div class="modal-content">
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3 class="modal-title">Purchase Successful!</h3>
            <p class="success-message">The novel has been added to your library. You can now read it anytime!</p>
            
            <div class="payment-summary">
                <div class="summary-item">
                    <span>Reference:</span>
                    <span id="successTransactionRef">[Reference]</span>
                </div>
                <div class="summary-item">
                    <span>Date:</span>
                    <span id="successPurchaseDate">[Date]</span>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-primary" id="closeSuccessBtn">Start Reading</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer style="text-align: center; color: white; padding: 30px 0; margin-top: 50px;">
        <p>© 2026 Student Companion | Premium Novel Collection</p>
        <p style="opacity: 0.8; margin-top: 10px;">Where stories come to life</p>
    </footer>

    <script>
        // Paystack Configuration
        const PAYSTACK_CONFIG = {
            publicKey: 'pk_test_your_public_key_here', // Replace with your Paystack public key
            amount: 200000, // 2000 Naira in kobo (minimum 100 kobo)
            currency: 'NGN',
            channels: ['card', 'bank', 'ussd', 'qr', 'mobile_money', 'bank_transfer']
        };

   // Novel Data
        const novels = [
           {
                id: 1,
                title: "The Shadow of the Wind",
                author: "Carlos Ruiz Zafón",
                genre: "mystery",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "bestseller",
                description: "A mysterious novel about a boy who discovers a book that will change his life forever in post-war Barcelona.",
                pages: "487",
                contentUrl: "novel/shadow of wind.html"
            },
            {
                id: 2,
                title: "Pride and Prejudice",
                author: "Jane Austen",
                genre: "classic",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1541963463532-d68292c34b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "popular",
                description: "The timeless romantic novel about Elizabeth Bennet and Mr. Darcy in 19th century England.",
                pages: "432",
                contentUrl: "novel/pride and prejudice.html"
            },
            {
                id: 3,
                title: "The Name of the Wind",
                author: "Patrick Rothfuss",
                genre: "fantasy",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1621351183012-e2f9972dd9bf?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "bestseller",
                description: "The story of a gifted young man's journey through a world of magic, music, and mystery.",
                pages: "662",
                contentUrl: "novel/name of the wind.html"
            },
            {
                id: 4,
                title: "Gone Girl",
                author: "Gillian Flynn",
                genre: "thriller",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1551829142-d9b8cf8c6c6e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "popular",
                description: "A psychological thriller about a marriage gone terribly wrong and the mystery of a missing wife.",
                pages: "415",
                contentUrl: "novel/gone girl.html"
            },
            {
                id: 5,
                title: "Dune",
                author: "Frank Herbert",
                genre: "scifi",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1531928351158-2f736078e0a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "classic",
                description: "The epic science fiction novel set in the distant future amidst a feudal interstellar society.",
                pages: "604",
                contentUrl: "novel/dune.html"
            },
            {
                id: 6,
                title: "The Night Circus",
                author: "Erin Morgenstern",
                genre: "fantasy",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1512820790803-83ca734da794?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "new",
                description: "A magical competition between two illusionists set in a mysterious circus that appears without warning.",
                pages: "512",
                contentUrl: "novel/the night circus.html"
            },
            {
                id: 7,
                title: "The Seven Husbands of Evelyn Hugo",
                author: "Taylor Jenkins Reid",
                genre: "historical",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "popular",
                description: "Aging Hollywood icon Evelyn Hugo finally tells her life story to an unknown journalist.",
                pages: "400",
                contentUrl: "novel/the seven husbands of evelyn hugo.html"
            },
            {
                id: 8,
                title: "The Hobbit",
                author: "J.R.R. Tolkien",
                genre: "fantasy",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1549289524-06cf8837ace5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "classic",
                description: "Bilbo Baggins embarks on an unexpected adventure to reclaim the dwarf kingdom of Erebor.",
                pages: "310",
                contentUrl: "novel/the hobbit.html"
            },
            {
                id: 9,
                title: "The Silent Patient",
                author: "Alex Michaelides",
                genre: "thriller",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1551829142-d9b8cf8c6c6e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "bestseller",
                description: "A psychological thriller about a woman who shoots her husband and then stops speaking.",
                pages: "336",
                contentUrl: "novel/the silent patient.html"
            },
            {
                id: 10,
                title: "The Alchemist",
                author: "Paulo Coelho",
                genre: "classic",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "popular",
                description: "A shepherd boy's journey to the Egyptian pyramids in search of treasure teaches him about life.",
                pages: "208",
                contentUrl: "novel/the alchemist.html"
            },
            {
                id: 11,
                title: "Red, White & Royal Blue",
                author: "Casey McQuiston",
                genre: "romance",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "new",
                description: "A romantic comedy about the First Son of the United States falling for the Prince of Wales.",
                pages: "423",
                contentUrl: "novel/red white and royal blue.html"
            },
            {
                id: 12,
                title: "The Martian",
                author: "Andy Weir",
                genre: "scifi",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "popular",
                description: "An astronaut stranded on Mars must survive using his ingenuity and scientific knowledge.",
                pages: "387",
                contentUrl: "novel/the martian.html"
            },
            {
                id: 13,
                title: "Circe",
                author: "Madeline Miller",
                genre: "fantasy",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "bestseller",
                description: "A retelling of the story of Circe, the Greek goddess and sorceress from Homer's Odyssey.",
                pages: "393",
                contentUrl: "novel/circe.html"
            },
            {
                id: 14,
                title: "The Girl on the Train",
                author: "Paula Hawkins",
                genre: "thriller",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "popular",
                description: "A psychological thriller about a woman who becomes entangled in a missing persons investigation.",
                pages: "336",
                contentUrl: "novel/the girl on the train.html"
            },
            {
                id: 15,
                title: "Normal People",
                author: "Sally Rooney",
                genre: "romance",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1512820790803-83ca734da794?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "new",
                description: "The complicated relationship between two teenagers from different backgrounds in Ireland.",
                pages: "273",
                contentUrl: "novel/normal people.html"
            },
            {
                id: 16,
                title: "The Pillars of the Earth",
                author: "Ken Follett",
                genre: "historical",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1549289524-06cf8837ace5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "bestseller",
                description: "An epic historical novel set in 12th century England about the building of a cathedral.",
                pages: "973",
                contentUrl: "novel/the pillars of the earth.html"
            },
            {
                id: 17,
                title: "Project Hail Mary",
                author: "Andy Weir",
                genre: "scifi",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1531928351158-2f736078e0a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "new",
                description: "A lone astronaut must save the Earth from an astronomical catastrophe using only his wits.",
                pages: "476",
                contentUrl: "novel/project-hail-mary.html"
            },
            {
                id: 18,
                title: "The Midnight Library",
                author: "Matt Haig",
                genre: "fantasy",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "popular",
                description: "A novel about a library that contains books that let you experience the lives you might have lived.",
                pages: "304",
                contentUrl: "novel-content/midnight-library.html"
            },
            {
                id: 19,
                title: "Where the Crawdads Sing",
                author: "Delia Owens",
                genre: "mystery",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "bestseller",
                description: "A coming-of-age murder mystery about an abandoned girl who raises herself in the marshes of North Carolina.",
                pages: "384",
                contentUrl: "novel-content/where-crawdads-sing.html"
            },
            {
                id: 20,
                title: "The Song of Achilles",
                author: "Madeline Miller",
                genre: "historical",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "popular",
                description: "A retelling of the Iliad from the perspective of Patroclus, Achilles' companion and lover.",
                pages: "378",
                contentUrl: "novel-content/song-of-achilles.html"
            },
            {
                id: 21,
                title: "The Invisible Life of Addie LaRue",
                author: "V.E. Schwab",
                genre: "fantasy",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1621351183012-e2f9972dd9bf?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "new",
                description: "A woman makes a Faustian bargain to live forever but is cursed to be forgotten by everyone she meets.",
                pages: "448",
                contentUrl: "novel-content/invisible-life-addie-larue.html"
            },
            {
                id: 22,
                title: "The House in the Cerulean Sea",
                author: "T.J. Klune",
                genre: "fantasy",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1512820790803-83ca734da794?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "bestseller",
                description: "A magical island, a dangerous task, and a secret that might change the world.",
                pages: "398",
                contentUrl: "novel-content/cerulean-sea.html"
            },
            {
                id: 23,
                title: "Mexican Gothic",
                author: "Silvia Moreno-Garcia",
                genre: "mystery",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1551829142-d9b8cf8c6c6e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "popular",
                description: "A darkly enchanting reimagining of the classic gothic novel set in 1950s Mexico.",
                pages: "301",
                contentUrl: "novel-content/mexican-gothic.html"
            },
            {
                id: 24,
                title: "A Court of Thorns and Roses",
                author: "Sarah J. Maas",
                genre: "fantasy",
                price: 2000,
                cover: "https://images.unsplash.com/photo-1549289524-06cf8837ace5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                badge: "bestseller",
                description: "A blend of fantasy and romance where a huntress is taken to a magical kingdom for a crime.",
                pages: "419",
                contentUrl: "novel-content/court-of-thorns-roses.html"
            }
        ];

        // Global variables
        let currentUser = null;
        let currentNovel = null;
        let currentView = 'all';

        // DOM Elements
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');
        const homeBtn = document.getElementById('homeBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const searchInput = document.getElementById('searchInput');
        const genreFilters = document.getElementById('genreFilters');
        const viewAllBtn = document.getElementById('viewAllBtn');
        const viewLibraryBtn = document.getElementById('viewLibraryBtn');
        const novelsGrid = document.getElementById('novelsGrid');
        const libraryGrid = document.getElementById('libraryGrid');
        const librarySection = document.getElementById('librarySection');
        const emptyLibrary = document.getElementById('emptyLibrary');
        const totalNovelsEl = document.getElementById('totalNovels');
        const myLibraryCountEl = document.getElementById('myLibraryCount');
        const purchaseModal = document.getElementById('purchaseModal');
        const paystackModal = document.getElementById('paystackModal');
        const successModal = document.getElementById('successModal');

        // Initialize application
        function init() {
            checkAuthentication();
            loadUserData();
            setupEventListeners();
            initializeGenres();
            displayAllNovels();
            updateStats();
        }

        // Check authentication
        function checkAuthentication() {
            // Try to get the logged-in user from different possible storage locations
            currentUser = localStorage.getItem('currentUser') || 
                         localStorage.getItem('loginUser') || 
                         localStorage.getItem('loggedInUser') ||
                         sessionStorage.getItem('currentUser');
            
            if (!currentUser) {
                alert('Please log in to access the novel collection!');
                window.location.href = 'homepage.html';
            }
        }

        // Load user data - showing only username
        function loadUserData() {
            // Extract just the username (remove any extra info)
            const cleanUsername = extractUsername(currentUser);
            userName.textContent = cleanUsername;
            userAvatar.textContent = cleanUsername.charAt(0).toUpperCase();
        }

        // Extract only the username from stored data
        function extractUsername(userData) {
            if (!userData) return 'User';
            
            // If it's a string, try to parse it as JSON first
            try {
                const parsed = JSON.parse(userData);
                if (typeof parsed === 'object' && parsed !== null) {
                    return parsed.username || parsed.name || parsed.email || 'User';
                }
            } catch (e) {
                // If not JSON, use as is
            }
            
            // If it contains an email, extract the username part
            if (userData.includes('@')) {
                return userData.split('@')[0];
            }
            
            // Return first 15 characters if too long
            return userData.length > 15 ? userData.substring(0, 15) + '...' : userData;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Home button
            homeBtn.addEventListener('click', goHome);
            
            // Logout
            logoutBtn.addEventListener('click', logout);
            
            // Search
            searchInput.addEventListener('input', handleSearch);
            
            // View toggle
            viewAllBtn.addEventListener('click', () => switchView('all'));
            viewLibraryBtn.addEventListener('click', () => switchView('library'));
            
            // Modal buttons
            document.getElementById('closePurchaseModal').addEventListener('click', closePurchaseModal);
            document.getElementById('cancelPurchaseBtn').addEventListener('click', closePurchaseModal);
            document.getElementById('confirmPurchaseBtn').addEventListener('click', openPaystackModal);
            
            document.getElementById('closePaystackModal').addEventListener('click', closePaystackModal);
            document.getElementById('cancelPaystackBtn').addEventListener('click', closePaystackModal);
            document.getElementById('payWithPaystackBtn').addEventListener('click', processPaystackPayment);
            
            document.getElementById('closeSuccessBtn').addEventListener('click', closeSuccessModal);
        }

        // Go to homepage
        function goHome() {
            window.location.href = 'homepage.html';
        }

        // Initialize genre filters
        function initializeGenres() {
            const genres = [...new Set(novels.map(novel => novel.genre))];
            genreFilters.innerHTML = `
                <div class="filter-tag active" data-genre="all">All</div>
                ${genres.map(genre => `
                    <div class="filter-tag" data-genre="${genre}">${genre}</div>
                `).join('')}
            `;
            
            // Add genre filter event listeners
            document.querySelectorAll('.filter-tag').forEach(tag => {
                tag.addEventListener('click', () => {
                    document.querySelectorAll('.filter-tag').forEach(t => t.classList.remove('active'));
                    tag.classList.add('active');
                    const genre = tag.dataset.genre;
                    if (currentView === 'all') {
                        displayAllNovels('', genre);
                    }
                });
            });
        }

        // Display all novels
        function displayAllNovels(searchTerm = '', genre = 'all') {
            novelsGrid.innerHTML = '';
            
            let filteredNovels = novels;
            
            // Apply search filter
            if (searchTerm) {
                filteredNovels = filteredNovels.filter(novel => 
                    novel.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    novel.author.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    novel.description.toLowerCase().includes(searchTerm.toLowerCase())
                );
            }
            
            // Apply genre filter
            if (genre !== 'all') {
                filteredNovels = filteredNovels.filter(novel => novel.genre === genre);
            }
            
            // Display novels
            filteredNovels.forEach(novel => {
                const isPurchased = isNovelPurchased(novel.id);
                novelsGrid.appendChild(createNovelCard(novel, isPurchased));
            });
            
            totalNovelsEl.textContent = filteredNovels.length;
        }

        // Display user's library
        function displayLibrary() {
            const purchasedNovels = getPurchasedNovels();
            
            if (purchasedNovels.length === 0) {
                libraryGrid.innerHTML = '';
                emptyLibrary.style.display = 'block';
                return;
            }
            
            emptyLibrary.style.display = 'none';
            libraryGrid.innerHTML = '';
            
            purchasedNovels.forEach(novel => {
                libraryGrid.appendChild(createNovelCard(novel, true));
            });
        }

        // Create novel card
        function createNovelCard(novel, isPurchased) {
            const card = document.createElement('div');
            card.className = 'novel-card';
            card.dataset.id = novel.id;
            
            let badgeClass = '';
            let badgeText = '';
            switch(novel.badge) {
                case 'new': badgeClass = 'badge-new'; badgeText = 'NEW'; break;
                case 'bestseller': badgeClass = 'badge-bestseller'; badgeText = 'BESTSELLER'; break;
                case 'popular': badgeClass = 'badge-popular'; badgeText = 'POPULAR'; break;
            }
            
            const buttonHTML = isPurchased ? 
                `<button class="btn btn-success" onclick="readNovel(${novel.id})">
                    <i class="fas fa-book-open"></i> Read Now
                </button>` :
                `<button class="btn btn-primary" onclick="openPurchaseModal(${novel.id})">
                    <i class="fas fa-shopping-cart"></i> Purchase
                </button>`;
            
            card.innerHTML = `
                <div style="position: relative;">
                    <img src="${novel.cover}" alt="${novel.title}" class="novel-cover">
                    ${badgeClass ? `<span class="novel-badge ${badgeClass}">${badgeText}</span>` : ''}
                </div>
                <div class="novel-content">
                    <h3 class="novel-title">${novel.title}</h3>
                    <p class="novel-author">by ${novel.author}</p>
                    <p class="novel-description">${novel.description}</p>
                    <div class="novel-footer">
                        <div class="novel-price">₦${novel.price.toLocaleString()}</div>
                        <span class="novel-meta">
                            <i class="fas fa-book"></i> ${novel.genre}
                        </span>
                    </div>
                    <div class="novel-actions">
                        ${buttonHTML}
                    </div>
                </div>
            `;
            
            return card;
        }

        // Check if novel is purchased
        function isNovelPurchased(novelId) {
            const users = JSON.parse(localStorage.getItem('users')) || {};
            const userData = users[currentUser] || {};
            const purchasedNovels = userData.purchasedNovels || [];
            return purchasedNovels.some(purchase => purchase.id === novelId);
        }

        // Get purchased novels
        function getPurchasedNovels() {
            const users = JSON.parse(localStorage.getItem('users')) || {};
            const userData = users[currentUser] || {};
            const purchasedNovels = userData.purchasedNovels || [];
            return purchasedNovels.map(purchase => {
                const novel = novels.find(n => n.id === purchase.id);
                return novel || purchase;
            });
        }

        // Purchase novel
        function addPurchasedNovel(novel, transactionData) {
            const users = JSON.parse(localStorage.getItem('users')) || {};
            if (!users[currentUser]) {
                users[currentUser] = {};
            }
            if (!users[currentUser].purchasedNovels) {
                users[currentUser].purchasedNovels = [];
            }
            
            // Check if already purchased
            if (!users[currentUser].purchasedNovels.some(p => p.id === novel.id)) {
                users[currentUser].purchasedNovels.push({
                    id: novel.id,
                    title: novel.title,
                    author: novel.author,
                    contentUrl: novel.contentUrl,
                    purchaseDate: new Date().toISOString(),
                    price: novel.price,
                    transactionRef: transactionData.reference,
                    paystackRef: transactionData.paystackRef
                });
                
                localStorage.setItem('users', JSON.stringify(users));
                return true;
            }
            return false;
        }

        // Read novel
        function readNovel(novelId) {
            const novel = novels.find(n => n.id === novelId);
            if (novel && isNovelPurchased(novelId)) {
                if (novel.contentUrl) {
                    window.open(novel.contentUrl, '_blank');
                } else {
                    alert('Content not available yet. Please check back later.');
                }
            }
        }

        // Update stats
        function updateStats() {
            totalNovelsEl.textContent = novels.length;
            myLibraryCountEl.textContent = getPurchasedNovels().length;
        }

        // Switch view
        function switchView(view) {
            currentView = view;
            
            if (view === 'all') {
                viewAllBtn.classList.add('active');
                viewLibraryBtn.classList.remove('active');
                novelsGrid.style.display = 'grid';
                librarySection.style.display = 'none';
                displayAllNovels(searchInput.value);
            } else {
                viewLibraryBtn.classList.add('active');
                viewAllBtn.classList.remove('active');
                novelsGrid.style.display = 'none';
                librarySection.style.display = 'block';
                displayLibrary();
            }
        }

        // Handle search
        function handleSearch(e) {
            if (currentView === 'all') {
                const activeGenre = document.querySelector('.filter-tag.active').dataset.genre;
                displayAllNovels(e.target.value, activeGenre);
            }
        }

        // Open purchase modal
        function openPurchaseModal(novelId) {
            currentNovel = novels.find(n => n.id === novelId);
            if (!currentNovel) return;
            
            document.getElementById('purchaseNovelTitle').textContent = currentNovel.title;
            document.getElementById('purchaseNovelAuthor').textContent = currentNovel.author;
            document.getElementById('purchaseNovelPrice').textContent = currentNovel.price.toLocaleString();
            document.getElementById('purchaseTotalPrice').textContent = currentNovel.price.toLocaleString();
            
            purchaseModal.style.display = 'block';
        }

        // Close purchase modal
        function closePurchaseModal() {
            purchaseModal.style.display = 'none';
            currentNovel = null;
        }

        // Open Paystack modal
        function openPaystackModal() {
            if (!currentNovel) return;
            
            document.getElementById('paystackNovelTitle').textContent = currentNovel.title;
            document.getElementById('paystackNovelPrice').textContent = currentNovel.price.toLocaleString();
            document.getElementById('customerEmail').value = '';
            document.getElementById('paymentProcessing').style.display = 'none';
            
            purchaseModal.style.display = 'none';
            paystackModal.style.display = 'block';
        }

        // Close Paystack modal
        function closePaystackModal() {
            paystackModal.style.display = 'none';
            currentNovel = null;
        }

        // Process Paystack payment (demo version)
        function processPaystackPayment() {
            const email = document.getElementById('customerEmail').value.trim();
            
            if (!email || !validateEmail(email)) {
                alert('Please enter a valid email address');
                return;
            }
            
            // Show processing
            document.getElementById('paymentProcessing').style.display = 'block';
            
            // Simulate payment processing (demo mode)
            setTimeout(() => {
                document.getElementById('paymentProcessing').style.display = 'none';
                
                // Generate mock transaction reference
                const transactionRef = 'STUDENT_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9).toUpperCase();
                
                // Simulate successful payment
                const success = addPurchasedNovel(currentNovel, {
                    reference: transactionRef,
                    paystackRef: 'paystack_' + transactionRef
                });
                
                if (success) {
                    // Update UI
                    updateStats();
                    
                    // Show success modal
                    document.getElementById('successTransactionRef').textContent = transactionRef;
                    document.getElementById('successPurchaseDate').textContent = new Date().toLocaleString();
                    
                    paystackModal.style.display = 'none';
                    successModal.style.display = 'block';
                    
                    // Refresh current view
                    if (currentView === 'all') {
                        displayAllNovels(searchInput.value);
                    } else {
                        displayLibrary();
                    }
                } else {
                    alert('This novel is already in your library!');
                }
            }, 2000); // 2 second delay to simulate processing
        }

        // Close success modal
        function closeSuccessModal() {
            successModal.style.display = 'none';
            currentNovel = null;
            
            // If the novel was just purchased, open it
            if (currentNovel && isNovelPurchased(currentNovel.id)) {
                readNovel(currentNovel.id);
            }
        }

        // Logout
        function logout() {
            // Clear all user-related storage
            localStorage.removeItem('currentUser');
            localStorage.removeItem('loginUser');
            localStorage.removeItem('loggedInUser');
            sessionStorage.removeItem('currentUser');
            window.location.href = 'index.html';
        }

        // Validate email
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', init);
    </script>
    <!-- Paystack Inline JS -->
    <script src="https://js.paystack.co/v1/inline.js"></script>
</body>
</html>
